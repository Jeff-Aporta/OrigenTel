<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OrigenTel.js</title>
    <link
      rel="icon"
      type="image/png"
      href="https://jeff-aporta.github.io/portafolio/src/imgs/icon.png"
    />

    <script src="https://jeff-aporta.github.io/ASCIIMapLoader/index.js"></script>
    <script src="https://jeff-aporta.github.io/ASCIIMapLoader/src/mapeos-personales.js"></script>

    <meta property="og:site_name" content="Jeffrey Agudelo" />
    <meta property="og:title" content="Jeffrey Agudelo" />
    <meta property="og:description" content="0,1,1,2,3,5,8,13,21,34,..." />
    <meta
      property="og:image"
      content="https://i.ibb.co/3vg4KNb/softyo-001.png"
    />

    <script>
      Object.values(ASCII_MAPS).forEach((map) => {
        runASCIIMapLoader_inLine(map);
      });

      runASCIIMapLoader_inLine(`
            ü§ñ REACT (JSX)

            ‚û§üìÅ src
            ‚îÇ
            ‚îú‚îÄ‚îÄüìÅ esquema
            ‚îÇ   ‚îú‚îÄ‚îÄüìÑ contenido
            ‚ïß   ‚îî‚îÄ‚îÄüìÑ pagina

            üìÑ index
        `);
    </script>
  </head>

  <body>
    <script>
      function convertNumberToHTML(input) {
        if (!input) {
          return "";
        }
        return `
        <div class="numberdata">
          <div class="item">
            <div style="text-align:left">codeCountry:</div> 
            <div style="text-align:right">${input.codeCountry}</div>
          </div>
          <div class="item">
            <div style="text-align:left">codeCall:</div> 
            <div style="text-align:right">${input.codeCall}</div>
          </div>
          <div class="item">
            <div style="text-align:left">numberWithoutCodeCall:</div> 
            <div style="text-align:right">${input.numberWithoutCodeCall}</div>
          </div>
          <div class="item">
            <div style="text-align:left">complete :</div> 
            <div style="text-align:right">${input.complete}</div>
          </div>
          <div class="item">
            <div style="text-align:left">nameCountry:</div> 
            <div style="text-align:right">${input.nameCountry}</div>
          </div>
          <div class="item">
            <div style="text-align:left">nameCountryES:</div> 
            <div style="text-align:right">${input.nameCountryES}</div>
          </div>
          <div class="item">
            <div style="text-align:left">formatNational:</div> 
            <div style="text-align:right">${input.formatNational}</div>
          </div>
          <div class="item">
            <div style="text-align:left">formatInternational:</div> 
            <div style="text-align:right">${input.formatInternational}</div>
          </div>
          <div class="item">
            <div style="text-align:left">formatRFC3966:</div> 
            <div style="text-align:right">${input.formatRFC3966}</div>
          </div>
          <div class="item">
            <div style="text-align:left">type:</div> 
            <div style="text-align:right">${input.type}</div>
          </div>
          <div class="item">
            <div style="text-align:left">isPosible:</div> 
            <div style="text-align:right">${input.isPosible}</div>
          </div>
          <div class="item">
            <div style="text-align:left">flagSVG_1x1:</div> 
            <div style="text-align:right;text;word-break: break-all;">${input.flagSVG_1x1}</div>
          </div>
          <div class="item">
            <div style="text-align:left">html img flagSVG_1x1:</div> 
            <div style="text-align:right"><img src="${input.flagSVG_1x1}" width="50px"></div>
          </div>
          <div class="item">
            <div style="text-align:left">flagSVG_4x3:</div> 
            <div style="text-align:right;text;word-break: break-all;">${input.flagSVG_4x3}</div>
          </div>
          <div class="item">
            <div style="text-align:left">html img flagSVG_4x3:</div> 
            <div style="text-align:right"><img src="${input.flagSVG_4x3}" width="50px"></div>
          </div>
        </div>
        `;
      }

      function probar() {
        let result = _getInfoInNumber(document.getElementById("number").value);
        let html = convertNumberToHTML(result);
        document.getElementById("resultados-prueba").innerHTML = html;

        if (result) {
          document.getElementById("img-prueba").src = result.flagSVG_4x3;
        } else {
          document.getElementById("img-prueba").src = "";
        }
      }

      function texto() {
        let results = _findPhoneNumbers(document.getElementById("text").value);
        let html = "";
        for (const result of results) {
          html += convertNumberToHTML(result);
        }
        document.getElementById("resultados-texto").innerHTML = html;
      }

      i_code = 0;

      function insertarC√≥digo(c) {
        c = c.split("\n");
        html = c.map((x) => x.replace(c[c.length - 1], ""));
        html.pop();
        html = html.join("<br>");
        document.write(
          `
        <div style="position:relative;">
              <a onclick="navigator.clipboard.writeText(document.getElementById('code-${i_code}').innerText);if(!this.innerText.includes('copiado')) this.innerHTML+=' copiado'" style="position:absolute;right:30px;transform:translateY(10px);cursor:pointer;color:white;">
                  <i class="fas fa-copy"></i>
              </a>
              <pre class="prettyprint languaje-js linenums:1" id="code-${i_code}">` +
            html +
            `
              </pre>
        </div>`
        );
        i_code++;
      }
    </script>

    <div style="padding: 30px">
      <div style="text-align: center">
        <img
          width="300px"
          src="https://i.ibb.co/k4D8R6Y/better-Call-Saul.gif"
        />
        <br /><br />
      </div>
      <h1 style="text-align: center">Empieza ahora</h1>
      <br />
      Los n√∫meros de tel√©fono var√≠an en forma y se manejan de manera diferente
      de un pa√≠s a otro. el m√≥dulo de
      <code style="color: black; font-weight: bolder">betterCallSaul.js</code>
      puede ayudarnos a formatear correctamente los n√∫meros de tel√©fono junto
      con los c√≥digos de pa√≠ses y tambi√©n validar campos en interfaces.
      <br />
      <br />
      <div style="background: rgba(0, 0, 0, 0.075); padding: 15px">
        <a href="#" target="_blank" id="open-lib" style="text-decoration: none">
          CDN
          <i class="fas fa-eye"></i>
        </a>

        <code
          style="
            display: block;
            text-align: center;
            background: rgba(0, 0, 0, 0.75);
            padding: 10px;
          "
        >
          <script>
            let url =
              location.href.replace("index.html", "").replace("//00", "/00") +
              "betterCallSaul.min.js";
            document.write(url);
            document.getElementById("open-lib").href = url;
          </script>
        </code>
      </div>
      <br />
      <h1 style="text-align: center">En ejecuci√≥n</h1>
      <h3>Interpretaci√≥n de un n√∫mero</h3>
      digita un n√∫mero de tel√©fono internacional en el input de aqu√≠ abajo para
      ver c√≥mo extrae los datos del n√∫mero
      <br />

      <br />
      <div style="text-align: center">
        <img src="" id="img-prueba" width="50px" />
        <input
          style="cursor: text; padding: 5px; vertical-align: top"
          type="text"
          id="number"
          placeholder="N√∫mero a comprobar"
          onchange="probar()"
          onkeyup="probar()"
        />
      </div>
      <br />
      <div id="resultados-prueba"></div>
      <br />
      <hr />
      <h3 style="text-transform: uppercase; font-weight: lighter">
        Buscar n√∫meros en texto
      </h3>
      Escribe textos en lenguaje natural que contengan n√∫meros de tel√©fono con
      formato internacional.
      <br /><br />
      <div style="text-align: center">
        <textarea
          style="
            padding: 10px;
            text-align: left;
            cursor: text;
            width: 50%;
            height: 200px;
          "
          id="text"
        >
Hola amigos, mi nombre es Jeffrey Agudelo y mi n√∫mero es +573107257814, el n√∫mero de mi madre es +7 8005553535 y el de mi padre es (+91)9098765432, el de mi t√≠o es +3-161-3355460 y el de mi t√≠a es +52 8886732311

es importante destacar que los n√∫meros escritos anteriormente tienen diferentes formatos, espacios, guiones y par√©ntesis, esta funci√≥n los encontrar√° y los extraer√°.</textarea
        >
        <button
          class="btn btn-primary"
          style="vertical-align: top"
          onclick="texto()"
        >
          Buscar
        </button>
        <br />
        <div id="resultados-texto"></div>
      </div>
      <hr />
      <h1 style="text-align: center">Tutorial</h1>
      Una vez importada la librer√≠a en el head, ya sea con la CDN o si
      descargaste el archivo, podr√°s ejecutar el c√≥digo que se presentar√° a
      continuaci√≥n:
      <br />
      <br />
      <h3 style="text-transform: uppercase; font-weight: lighter">
        Analizando un n√∫mero de tel√©fono
      </h3>
      <br />
      Veamos c√≥mo podemos usar el <code>_getInfoInNumber()</code>, para que nos
      retorne un objeto con la informaci√≥n, debemos pasarle de argumento el
      n√∫mero de tel√©fono completo, incluido el c√≥digo del pa√≠s.
      <script>
        insertarC√≥digo(`
      let result = _getInfoInNumber("+573107257814") //{codeCountry: "CO",codeCall: "57",...
      `);
      </script>
      <strong
        >La funci√≥n _getInfoInNumber() devuelve los siguientes datos:</strong
      >
      el c√≥digo del pa√≠s (<code>codeCountry</code>), el c√≥digo de llamada del
      pa√≠s (<code>codeCall</code>), el n√∫mero sin el c√≥digo de llamada del pa√≠s
      (<code>numberWithoutCodeCall</code>), el n√∫mero de completo
      (<code>complete</code>), el nombre del pa√≠s en ingl√©s
      (<code>nameCountry</code>) y en espa√±ol (<code>nameCountryES</code>), el
      formato nacional del n√∫mero (<code>formatNational</code>), el formato
      internacional (<code>formatInternational</code>), el formato rfc 3966
      (<code>formatRFC3966</code>), el tipo de l√≠nea (<code>type</code>), estima
      en falso o verdadero de si es posible o no el n√∫mero
      (<code>isPosible</code>) y adem√°s busca rutas de im√°genes representativas
      para el pa√≠s, una en relaci√≥n 1:1 (<code>flagSVG_1x1</code>) y la otra en
      4:3 (<code>flagSVG_4x3</code>).
      <script>
        insertarC√≥digo(`
      {
          codeCountry: "CO",
          codeCall: "57",
          numberWithoutCodeCall: "3107257814",
          complete: "+573107257814",
          nameCountry: "Colombia",
          nameCountryES: "Colombia",
          formatNational: "310 7257814",
          formatInternational: "+57 310 7257814",
          formatRFC3966: "tel:+573107257814",
          type: "MOBILE",
          isPosible: true,
          flagSVG_4x3: "https://flagicons.lipis.dev/flags/4x3/co.svg",
          flagSVG_1x1: "https://flagicons.lipis.dev/flags/1x1/co.svg"
      }
      `);
      </script>

      <br />
      <hr />

      <h3>Analizando cadenas con ruido.</h3>

      Se le denomina ruido a toda a toda perturbaci√≥n textual que haya en el
      input, que no corresponda con un n√∫mero de tel√©fono, datos que para el
      int√©rprete no tienen ning√∫n sentido, puesto que no fue entrenado para
      esto. El int√©rprete es capaz de extraer los n√∫meros de tel√©fono con
      formato internacional que hayan en una cadena.
      <br /><br />
      Para la cadena
      <code>"Mi n√∫mero es (+57)310-725 7814, me llamo Jeff"</code>, el n√∫mero a
      extraer es +573107257814, tiene ruido por la derecha, por la izquierda y
      en medio, sin embargo el siguiente c√≥digo extraer√° y retornar√° los datos
      de todos los n√∫meros con formato internacional que encuentre en la cadena
      suministrada

      <br />
      <script>
        insertarC√≥digo(`
      let results = _findPhoneNumbers("Mi n√∫mero es (+57)310-725 7814, me llamo Jeff")
      `);
      </script>

      <strong
        >La funci√≥n _findPhoneNumbers() devuelve un arreglo con el
        _getInfoInNumber() de todos los n√∫meros encontrados</strong
      >
      <br />
      <br />
      Salida esperada:

      <script>
        insertarC√≥digo(`
      [
          {
              codeCountry: "CO",
              codeCall: "57",
              numberWithoutCodeCall: "3107257814",
              complete: "+573107257814",
              nameCountry: "Colombia",
              nameCountryES: "Colombia",
              formatNational: "310 7257814",
              formatInternational: "+57 310 7257814",
              formatRFC3966: "tel:+573107257814",
              type: "MOBILE",
              isPosible: true,
              flagSVG_4x3: "https://flagicons.lipis.dev/flags/4x3/co.svg",
              flagSVG_1x1: "https://flagicons.lipis.dev/flags/1x1/co.svg"
          }
      ]
      `);
      </script>

      <br />
      <hr />

      <h1 style="text-align: center">¬øC√≥mo funciona?</h1>
      Esto lo hace por medio de expresiones regulares, y algoritmos, pudiendo
      retornar as√≠ un objeto con la informaci√≥n que puede extraer del n√∫mero,
      para que quede claro, les voy a explicar con un ejemplo lo que hace
      internamente el programas.
      <br />
      Hablemos en el caso de Colombia, los tel√©fonos tienen 8, 10 y 11 d√≠gitos,
      debe existir una funci√≥n que una vez reconocido el indicativo del pa√≠s,
      extraiga el resto del n√∫mero para hacer las correspondientes
      verificaciones. En el caso de los n√∫meros con 10 d√≠gitos.
      <br />
      <br />
      <ul>
        <li>
          La expresi√≥n regular es la siguiente:
          <script>
            insertarC√≥digo(`
              let E10 = new RegExp("3333(?:0(?:0\\d|1[0-5])|[4-9]\\d\\d)\\d{3}|33(?:00|3[0-24-9])\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}")
              `);
          </script>
          y con esto podremos comprobar si un n√∫mero de al menos 10 d√≠gitos,
          est√° bien o mal escrito, ejemplo:
          <br />
          <br />
          N√∫mero bien escrito con formato colombiano
          <script>
            insertarC√≥digo(`
              E10.test("3107234567") //true
              `);
          </script>
          N√∫mero escrito escrito con formato colombiano, no tiene el m√≠nimo de
          10 d√≠gitos
          <script>
            insertarC√≥digo(`
              E10.test("310723456") //false
              `);
          </script>
          Tambi√©n hay que analizar que los n√∫meros de 10 d√≠gitos en colombia,
          aparte de iniciar por 3 sus siguientes 2 d√≠gitos tienen restricciones,
          los primeros 3 d√≠gitos para esta clase de n√∫meros son algunos de
          estos:
          <br />
          <br />
          300, 301, 302, 304, 305 (Tigo)
          <br />
          303 (Uff M√≥vil)
          <br />
          304 (UNE)
          <br />
          305 (ETB)
          <br />
          310, 311, 312, 313, 314, 320, 321, 322, 323 Claro anteriormente
          conocido como Comcel
          <br />
          315, 316, 317, 318 Movistar
          <br />
          319 Virgin Mobile
          <br />
          350, 351 Avantel
          <br />
          <br />
          lo que significa que la expresi√≥n regular anteriormente descrita debe
          ser capaz de excluir cualquier otro n√∫mero que no empiece por alguno
          de estos n√∫meros, siendo as√≠ entonces vamos a probar.
          <script>
            insertarC√≥digo(`
          E10.test("3011234567") //true
          E10.test("3031234567") //true
          E10.test("3061234567") //false
          E10.test("3071234567") //false
          E10.test("3101234567") //true
          E10.test("3601234567") //false
          `);
          </script>
          <br />
          Como se puede observar, los n√∫meros que no inicien por estos
          indicativos, no son n√∫meros v√°lidos para n√∫meros de 10 d√≠gitos de
          colombia
        </li>
        <li>
          De esta misma manera, se pueden generar las expresiones regulares para
          los n√∫meros colombianos de 8 y 11 d√≠gitos:
          <script>
            insertarC√≥digo(`
          let E8 = new RegExp("[124-8][2-9]\\d{6}")
          let E11 = new RegExp("1800\\d{7}")
          let E11_2 = new RegExp("19(?:0[01]|4[78])\\d{7}")
          `);
          </script>
          Estas expresiones son m√°s cortas, puesto que las restricciones son
          menores.
        </li>
      </ul>
      Y bueno, en esencia as√≠ es la l√≥gica con la que trabaja el programa
      <br />
    </div>

  </body>
</html>
